node {

    def mvnHome

    def workspace = pwd()
    echo "workspace = ${workspace}"

    def nine = 9
    def ten = nine + 1

    stage('Preparation') { // for display purposes
        git 'https://github.com/gitlabzz/demo-api.git'
        mvnHome = tool 'M3'
    }

    stage('Calculate') {
        try {
            if (ten > nine) {
                echo "${fibonacci(ten)}"
                sh returnStdout: true, script: 'script-which-doesnt-exist.sh'
            }
        }
        catch (exc) {
            echo "some exception just happened!!"
        }

    }

    stage('Build') {
        // Run the maven build
        withEnv(["MVN_HOME=$mvnHome"]) {
            if (isUnix()) {
                sh '"$MVN_HOME/bin/mvn" -Dmaven.test.failure.ignore clean install'
            }
        }
    }
}


def int fibonacci(int n) {
    n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2)
}